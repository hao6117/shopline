<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>南九州五日遊 - 即時天氣版</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-dark: #121212;
            --bg-card: #1e1e1e;
            --accent: #d4af37; /* 金色 */
            --accent-light: #f1c40f;
            --text-main: #ffffff;
            --text-sub: #a0a0a0;
        }
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: black;
            color: var(--text-main);
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        /* 隱藏 Scrollbar 但保留功能 */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* 玻璃擬態 */
        .glass-panel {
            background: rgba(30, 30, 30, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        /* 左側導航激活狀態 */
        .nav-item.active {
            color: var(--accent);
            position: relative;
        }
        .nav-item.active::after {
            content: '';
            position: absolute;
            left: -12px;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 20px;
            background-color: var(--accent);
            border-radius: 0 4px 4px 0;
        }

        /* 頂部導航激活狀態 (原底部導航) */
        .tab-btn {
            position: relative;
        }
        .tab-btn.active {
            color: var(--accent);
        }
        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 40%;
            height: 3px;
            background-color: var(--accent);
            border-radius: 3px 3px 0 0;
        }

        /* 小撇步區塊樣式 */
        .tip-box {
            background: rgba(212, 175, 55, 0.1);
            border-left: 4px solid var(--accent);
        }

        /* 詳細資訊文字樣式 */
        .spot-detail {
            font-size: 0.75rem;
            color: #ccc;
            margin-top: 0.5rem;
            padding-top: 0.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            line-height: 1.5;
        }
        .spot-tag {
            color: #d4af37;
            font-weight: bold;
            margin-right: 4px;
        }

        .info-list li {
            margin-bottom: 4px;
            display: flex;
            align-items: flex-start;
        }
        .info-list i {
            margin-top: 3px;
            margin-right: 6px;
            width: 14px;
            text-align: center;
            flex-shrink: 0;
        }
        
        /* Calculator Button Style */
        .calc-btn {
            padding: 10px 0;
            border-radius: 8px;
            font-weight: bold;
            font-size: 1.1rem;
            background-color: #333;
            color: var(--text-main);
            transition: background-color 0.15s, transform 0.1s;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.5);
            -webkit-tap-highlight-color: transparent; /* 移除點擊高亮 */
        }
        .calc-btn:active {
            transform: scale(0.95);
        }

        /* Loading Animation for Weather */
        @keyframes pulse-yellow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .updating {
            animation: pulse-yellow 1.5s infinite;
        }
    </style>
</head>
<body class="h-screen flex flex-col max-w-md mx-auto relative shadow-2xl shadow-gray-900 border-x border-gray-800">

    <div class="h-12 flex-none flex items-center justify-between px-5 bg-[#121212] border-b border-gray-800 z-50">
        <span class="text-sm font-bold text-gray-400">南九州之旅</span>
        <div class="flex items-center space-x-2">
            <span class="text-xs px-2 py-1 bg-gray-800 rounded-full text-gray-400">5 Days</span>
        </div>
    </div>

    <nav class="h-14 flex-none bg-[#181818] border-b border-gray-800 flex justify-around items-center px-2 z-40">
        <button onclick="switchMainTab('itinerary', this)" class="tab-btn active flex-1 flex items-center justify-center text-gray-500 h-full space-x-2">
            <i class="fas fa-calendar-alt text-lg"></i>
            <span class="text-sm font-bold">行程</span>
        </button>
        <button onclick="switchMainTab('tools', this)" class="tab-btn flex-1 flex items-center justify-center text-gray-500 h-full space-x-2">
            <i class="fas fa-wallet text-lg"></i>
            <span class="text-sm font-bold">錢包與工具</span>
        </button>
    </nav>

    <main class="flex-1 overflow-hidden relative bg-[#121212]">
        
        <div id="itinerary-view" class="section-view w-full h-full flex">
            
            <div class="w-20 bg-[#181818] h-full flex flex-col items-center py-4 space-y-8 overflow-y-auto no-scrollbar border-r border-gray-800 z-10">
                <div onclick="scrollToDay('day1')" class="nav-item active flex flex-col items-center cursor-pointer transition-colors duration-300 text-gray-500 hover:text-gray-300">
                    <div class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center mb-1 shadow-lg">
                        <i class="fas fa-plane text-sm"></i>
                    </div>
                    <span class="text-[10px] font-bold">Day 1</span>
                </div>

                <div onclick="scrollToDay('day2')" class="nav-item flex flex-col items-center cursor-pointer transition-colors duration-300 text-gray-500 hover:text-gray-300">
                    <div class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center mb-1 shadow-lg">
                        <i class="fas fa-mountain text-sm"></i>
                    </div>
                    <span class="text-[10px] font-bold">Day 2</span>
                </div>

                <div onclick="scrollToDay('day3')" class="nav-item flex flex-col items-center cursor-pointer transition-colors duration-300 text-gray-500 hover:text-gray-300">
                    <div class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center mb-1 shadow-lg">
                        <i class="fas fa-water text-sm"></i>
                    </div>
                    <span class="text-[10px] font-bold">Day 3</span>
                </div>

                <div onclick="scrollToDay('day4')" class="nav-item flex flex-col items-center cursor-pointer transition-colors duration-300 text-gray-500 hover:text-gray-300">
                    <div class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center mb-1 shadow-lg">
                        <i class="fas fa-torii-gate text-sm"></i>
                    </div>
                    <span class="text-[10px] font-bold">Day 4</span>
                </div>

                <div onclick="scrollToDay('day5')" class="nav-item flex flex-col items-center cursor-pointer transition-colors duration-300 text-gray-500 hover:text-gray-300">
                    <div class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center mb-1 shadow-lg">
                        <i class="fas fa-suitcase text-sm"></i>
                    </div>
                    <span class="text-[10px] font-bold">Day 5</span>
                </div>
            </div>

            <div id="content-scroll" class="flex-1 h-full overflow-y-auto bg-black p-4 space-y-16 pb-8 scroll-smooth">
                
                <div id="day1" class="day-section pt-2">
                    <span class="inline-block px-3 py-1 bg-[#d4af37] text-black text-xs font-bold rounded mb-2">Day 1</span>
                    <h2 class="text-3xl font-bold mb-4 text-white">鹿兒島・抵達</h2>
                    
                    <!-- Weather Widget Section -->
                    <div id="weather-widget" class="bg-blue-900/20 border border-blue-800 rounded-lg p-3 mb-6 transition-all duration-500">
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="text-blue-400 text-xs font-bold"><i class="fas fa-temperature-low mr-1"></i> 12/4 - 12/8 天氣預報</h4>
                            <span class="text-[10px] text-gray-500 flex items-center bg-black/30 px-2 py-1 rounded-full">
                                <i class="fas fa-sync-alt mr-1 text-[8px]" id="refresh-icon"></i>
                                更新於: <span id="weather-time" class="ml-1 font-mono">Loading...</span>
                            </span>
                        </div>
                        
                        <div class="text-gray-300 text-xs leading-5">
                            <p class="mb-1">
                                <span class="text-white font-bold">平地 (鹿兒島/宮崎/熊本)：</span> 晴時多雲，氣溫約 <span class="text-yellow-400">7°C ~ 19°C</span>。
                            </p>
                            <p class="mb-1">
                                <span class="text-white font-bold">山區 (Day 4 高千穗)：</span> <span class="text-red-400 font-bold">寒冷注意！</span>氣溫 <span class="text-blue-300">1°C ~ 7°C</span>。
                            </p>
                            <div class="mt-2 pt-2 border-t border-blue-800/50">
                                <span class="text-[#d4af37] font-bold"><i class="fas fa-tshirt mr-1"></i>即時穿搭建議：</span>
                                <p id="weather-advice" class="mt-1 text-gray-200">正在分析最新氣象資料...</p>
                            </div>
                        </div>
                    </div>

                    <p class="text-gray-400 text-sm mb-6 leading-relaxed">
                        抵達鹿兒島，體驗燒酒文化，造訪武家屋敷歷史，晚上在天文館商店街享受美食。
                    </p>

                    <div class="space-y-3">
                        <div class="glass-panel p-3 rounded-xl transition-transform">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-blue-900/30 flex items-center justify-center mr-3 text-blue-400"><i class="fas fa-plane-arrival"></i></div>
                                    <div class="font-bold text-sm">桃園國際機場 -> 鹿兒島空港</div>
                                </div>
                                <button onclick="openMap('鹿兒島空港')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform flex-shrink-0 p-1">
                                    <i class="fas fa-map-marker-alt text-lg"></i>
                                </button>
                            </div>
                            <div class="spot-detail">
                                <ul class="info-list">
                                    <li><i class="fas fa-shoe-prints text-green-400"></i><span><b>足湯：</b>機場外有免費天然溫泉足湯「おやっとさぁ」，旁邊有賣毛巾。</span></li>
                                    <li><i class="fas fa-utensils text-orange-400"></i><span><b>小吃：</b>抵達後可先去買「薩摩炸魚餅 (Satsumaage)」解饞。</span></li>
                                </ul>
                            </div>
                             <div id="note-day1-0" class="mt-4 pt-3 border-t border-gray-700/50">
                                <h5 class="text-xs text-gray-400 font-bold mb-2 flex items-center"><i class="fas fa-pen mr-1"></i> 備註</h5>
                                <textarea oninput="saveSpotNote('day1', 0)" class="w-full h-16 bg-gray-800/50 border border-gray-700 rounded-lg p-2 text-xs text-white resize-none outline-none focus:border-[#d4af37] mb-2" placeholder="輸入我的個人備註..."></textarea>
                            </div>
                        </div>

                        <!-- 新增行程 -->
                        <div class="glass-panel p-3 rounded-xl transition-transform">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-yellow-900/30 flex items-center justify-center mr-3 text-yellow-400"><i class="fas fa-wine-bottle"></i></div>
                                    <div class="font-bold text-sm">Barrel Valley PRAHA&GEN</div>
                                </div>
                                <button onclick="openMap('Barrel Valley PRAHA&GEN')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform flex-shrink-0 p-1">
                                    <i class="fas fa-map-marker-alt text-lg"></i>
                                </button>
                            </div>
                            <div class="spot-detail">
                                <ul class="info-list">
                                    <li><i class="fas fa-utensils text-orange-400"></i><span><b>美食：</b>推薦園區內「霧島麴藏 GEN」享用黑豚與麴料理，或品嚐新鮮釀造的「捷克啤酒」。甜點必吃「麴泡芙」。</span></li>
                                    <li><i class="fas fa-shopping-basket text-pink-400"></i><span><b>必買：</b>燒酒、麴甘酒、味噌等發酵產品。</span></li>
                                    <li><i class="fas fa-eye text-blue-400"></i><span><b>看點：</b>參觀燒酒工廠與了解麴菌歷史。</span></li>
                                </ul>
                            </div>
                             <div id="note-day1-1" class="mt-4 pt-3 border-t border-gray-700/50">
                                <h5 class="text-xs text-gray-400 font-bold mb-2 flex items-center"><i class="fas fa-pen mr-1"></i> 備註</h5>
                                <textarea oninput="saveSpotNote('day1', 1)" class="w-full h-16 bg-gray-800/50 border border-gray-700 rounded-lg p-2 text-xs text-white resize-none outline-none focus:border-[#d4af37] mb-2" placeholder="輸入我的個人備註..."></textarea>
                            </div>
                        </div>

                        <div class="glass-panel p-3 rounded-xl transition-transform">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-orange-900/30 flex items-center justify-center mr-3 text-orange-400"><i class="fas fa-landmark"></i></div>
                                    <div class="font-bold text-sm">知覽武家屋敷</div>
                                </div>
                                <button onclick="openMap('知覽武家屋敷')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform flex-shrink-0 p-1">
                                    <i class="fas fa-map-marker-alt text-lg"></i>
                                </button>
                            </div>
                            <div class="spot-detail">
                                <ul class="info-list">
                                    <li><i class="fas fa-utensils text-orange-400"></i><span><b>午餐：</b>「高城庵」或「富屋食堂 (Fumiya)」，必吃「雞肉刺身 (Torisashi)」與鄉土料理。</span></li>
                                    <li><i class="fas fa-coffee text-yellow-500"></i><span><b>午茶：</b>「川口茶舖」的傳統甜點或「知覽農園」的抹茶霜淇淋。</span></li>
                                    <li><i class="fas fa-shoe-prints text-green-400"></i><span><b>散步：</b>被稱為「薩摩的小京都」，共有7個庭園，建議預留1.5小時。</span></li>
                                </ul>
                            </div>
                             <div id="note-day1-2" class="mt-4 pt-3 border-t border-gray-700/50">
                                <h5 class="text-xs text-gray-400 font-bold mb-2 flex items-center"><i class="fas fa-pen mr-1"></i> 備註</h5>
                                <textarea oninput="saveSpotNote('day1', 2)" class="w-full h-16 bg-gray-800/50 border border-gray-700 rounded-lg p-2 text-xs text-white resize-none outline-none focus:border-[#d4af37] mb-2" placeholder="輸入我的個人備註..."></textarea>
                            </div>
                        </div>

                        <div class="glass-panel p-3 rounded-xl transition-transform">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-pink-900/30 flex items-center justify-center mr-3 text-pink-400"><i class="fas fa-shopping-bag"></i></div>
                                    <div class="font-bold text-sm">天文館商店街</div>
                                </div>
                                <button onclick="openMap('天文館商店街')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform flex-shrink-0 p-1">
                                    <i class="fas fa-map-marker-alt text-lg"></i>
                                </button>
                            </div>
                            <div class="spot-detail">
                                <ul class="info-list">
                                    <li><i class="fas fa-utensils text-orange-400"></i><span><b>必吃：</b>「鰻魚末吉」炭烤鰻魚、「天文館無邪氣」白熊冰、「蜂樂饅頭」(蜂蜜蛋糕紅豆餅)。</span></li>
                                    <li><i class="fas fa-utensils text-orange-400"></i><span><b>晚餐：</b>「吾愛人」黑豚涮涮鍋，湯頭濃郁。</span></li>
                                    <li><i class="fas fa-shopping-basket text-pink-400"></i><span><b>必買：</b>「薩摩蒸氣屋」的『卡士達蒸蛋糕 (Kasutadon)』與『輕羹 (Karukan)』。</span></li>
                                    <li><i class="fas fa-tags text-blue-400"></i><span><b>購物：</b>唐吉訶德、Sun Drug藥妝激戰區，建議比價。</span></li>
                                </ul>
                            </div>
                             <div id="note-day1-3" class="mt-4 pt-3 border-t border-gray-700/50">
                                <h5 class="text-xs text-gray-400 font-bold mb-2 flex items-center"><i class="fas fa-pen mr-1"></i> 備註</h5>
                                <textarea oninput="saveSpotNote('day1', 3)" class="w-full h-16 bg-gray-800/50 border border-gray-700 rounded-lg p-2 text-xs text-white resize-none outline-none focus:border-[#d4af37] mb-2" placeholder="輸入我的個人備註..."></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="mt-6 p-4 rounded-xl bg-gradient-to-r from-gray-800 to-gray-900 border border-gray-700 flex items-center justify-between">
                        <div>
                            <div class="text-[10px] text-[#d4af37] font-bold uppercase tracking-wider mb-1">Accommodation</div>
                            <div class="font-bold text-sm">城山ホテル鹿児島</div>
                        </div>
                        <button onclick="openMap('城山ホテル鹿児島')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform p-1">
                            <i class="fas fa-bed text-lg"></i>
                        </button>
                    </div>
                </div>

                <div id="day2" class="day-section">
                    <span class="inline-block px-3 py-1 bg-gray-700 text-gray-300 text-xs font-bold rounded mb-2">Day 2</span>
                    <h2 class="text-3xl font-bold mb-4 text-white">櫻島・霧島</h2>
                    <p class="text-gray-400 text-sm mb-6">搭乘渡輪前往活火山櫻島，近距離感受火山與熔岩的震撼，隨後前往霧島參拜神宮。</p>

                    <div class="space-y-3">
                        <div class="glass-panel p-3 rounded-xl transition-transform">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-green-900/30 flex items-center justify-center mr-3 text-green-400"><i class="fas fa-binoculars"></i></div>
                                    <div class="font-bold text-sm">城山公園展望台</div>
                                </div>
                                <button onclick="openMap('城山公園展望台')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform flex-shrink-0 p-1">
                                    <i class="fas fa-map-marker-alt text-lg"></i>
                                </button>
                            </div>
                            <div class="spot-detail">
                                <ul class="info-list">
                                    <li><i class="fas fa-camera text-blue-400"></i><span><b>拍照：</b>拍攝櫻島火山與鹿兒島市街景的最佳位置。</span></li>
                                    <li><i class="fas fa-shoe-prints text-green-400"></i><span><b>散步：</b>如果時間允許，可走自然步道 (約30分鐘)，享受森林浴。</span></li>
                                </ul>
                            </div>
                             <div id="note-day2-0" class="mt-4 pt-3 border-t border-gray-700/50">
                                <h5 class="text-xs text-gray-400 font-bold mb-2 flex items-center"><i class="fas fa-pen mr-1"></i> 備註</h5>
                                <textarea oninput="saveSpotNote('day2', 0)" class="w-full h-16 bg-gray-800/50 border border-gray-700 rounded-lg p-2 text-xs text-white resize-none outline-none focus:border-[#d4af37] mb-2" placeholder="輸入我的個人備註..."></textarea>
                            </div>
                        </div>

                        <div class="glass-panel p-3 rounded-xl transition-transform">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-pink-900/30 flex items-center justify-center mr-3 text-pink-400"><i class="fas fa-fan"></i></div>
                                    <div class="font-bold text-sm">仙巖園</div>
                                </div>
                                <button onclick="openMap('仙巖園')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform flex-shrink-0 p-1">
                                    <i class="fas fa-map-marker-alt text-lg"></i>
                                </button>
                            </div>
                            <div class="spot-detail">
                                <ul class="info-list">
                                    <li><i class="fas fa-utensils text-orange-400"></i><span><b>必吃：</b>「兩棒餅」(Jambo Mochi)，一份兩串，有味噌和醬油口味。</span></li>
                                    <li><i class="fas fa-eye text-blue-400"></i><span><b>看點：</b>借景櫻島的庭園美景、御殿導覽。</span></li>
                                    <li><i class="fas fa-coffee text-yellow-500"></i><span><b>咖啡：</b>旁邊的星巴克是「舊島津家礦山事務所」改建，登錄有形文化財，裝潢極美。</span></li>
                                </ul>
                            </div>
                             <div id="note-day2-1" class="mt-4 pt-3 border-t border-gray-700/50">
                                <h5 class="text-xs text-gray-400 font-bold mb-2 flex items-center"><i class="fas fa-pen mr-1"></i> 備註</h5>
                                <textarea oninput="saveSpotNote('day2', 1)" class="w-full h-16 bg-gray-800/50 border border-gray-700 rounded-lg p-2 text-xs text-white resize-none outline-none focus:border-[#d4af37] mb-2" placeholder="輸入我的個人備註..."></textarea>
                            </div>
                        </div>

                        <div class="glass-panel p-3 rounded-xl transition-transform">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-blue-900/30 flex items-center justify-center mr-3 text-blue-400"><i class="fas fa-ship"></i></div>
                                    <div class="font-bold text-sm">櫻島渡輪 (鹿兒島港 -> 櫻島港)</div>
                                </div>
                                <button onclick="openMap('櫻島渡輪')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform flex-shrink-0 p-1">
                                    <i class="fas fa-map-marker-alt text-lg"></i>
                                </button>
                            </div>
                            <div class="spot-detail">
                                <ul class="info-list">
                                    <li><i class="fas fa-utensils text-orange-400"></i><span><b>必吃：</b>船內的「藪金 (Yabukin) 烏龍麵」。航程僅15分鐘，上船請立刻去排隊點餐。</span></li>
                                    <li><i class="fas fa-wind text-gray-400"></i><span><b>提醒：</b>海風大且可能有火山灰，建議戴帽子保護頭髮。</span></li>
                                </ul>
                            </div>
                             <div id="note-day2-2" class="mt-4 pt-3 border-t border-gray-700/50">
                                <h5 class="text-xs text-gray-400 font-bold mb-2 flex items-center"><i class="fas fa-pen mr-1"></i> 備註</h5>
                                <textarea oninput="saveSpotNote('day2', 2)" class="w-full h-16 bg-gray-800/50 border border-gray-700 rounded-lg p-2 text-xs text-white resize-none outline-none focus:border-[#d4af37] mb-2" placeholder="輸入我的個人備註..."></textarea>
                            </div>
                        </div>

                        <!-- 新增行程 -->
                        <div class="glass-panel p-3 rounded-xl transition-transform">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-red-900/30 flex items-center justify-center mr-3 text-red-400"><i class="fas fa-volcano"></i></div>
                                    <div class="font-bold text-sm">有村熔岩展望所</div>
                                </div>
                                <button onclick="openMap('有村熔岩展望所')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform flex-shrink-0 p-1">
                                    <i class="fas fa-map-marker-alt text-lg"></i>
                                </button>
                            </div>
                            <div class="spot-detail">
                                <ul class="info-list">
                                    <li><i class="fas fa-shoe-prints text-green-400"></i><span><b>散步：</b>步道修建在1914年流出的熔岩上，全長約1公里，走完一圈約20-30分鐘。</span></li>
                                    <li><i class="fas fa-camera text-blue-400"></i><span><b>景色：</b>可360度欣賞錦江灣與櫻島南嶽火山口的壯麗景色 (有時會聽到噴發聲)。</span></li>
                                </ul>
                            </div>
                             <div id="note-day2-3" class="mt-4 pt-3 border-t border-gray-700/50">
                                <h5 class="text-xs text-gray-400 font-bold mb-2 flex items-center"><i class="fas fa-pen mr-1"></i> 備註</h5>
                                <textarea oninput="saveSpotNote('day2', 3)" class="w-full h-16 bg-gray-800/50 border border-gray-700 rounded-lg p-2 text-xs text-white resize-none outline-none focus:border-[#d4af37] mb-2" placeholder="輸入我的個人備註..."></textarea>
                            </div>
                        </div>

                        <div class="glass-panel p-3 rounded-xl transition-transform">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-red-900/30 flex items-center justify-center mr-3 text-red-400"><i class="fas fa-torii-gate"></i></div>
                                    <div class="font-bold text-sm">霧島神宮</div>
                                </div>
                                <button onclick="openMap('霧島神宮')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform flex-shrink-0 p-1">
                                    <i class="fas fa-map-marker-alt text-lg"></i>
                                </button>
                            </div>
                            <div class="spot-detail">
                                <ul class="info-list">
                                    <li><i class="fas fa-praying-hands text-yellow-500"></i><span><b>參拜：</b>坂本龍馬蜜月之地，求事業與姻緣。別忘了找「御神木」裡的烏紗帽神官。</span></li>
                                    <li><i class="fas fa-shopping-basket text-pink-400"></i><span><b>必買：</b>「九面守」(祈求萬事順利)、「鉾餅」(Hoko Mochi，類似肉桂口味的麻糬)。</span></li>
                                    <li><i class="fas fa-utensils text-orange-400"></i><span><b>美食：</b>周邊霧島溫泉市場有蒸氣溫泉蛋、黑豚肉包。</span></li>
                                </ul>
                            </div>
                             <div id="note-day2-4" class="mt-4 pt-3 border-t border-gray-700/50">
                                <h5 class="text-xs text-gray-400 font-bold mb-2 flex items-center"><i class="fas fa-pen mr-1"></i> 備註</h5>
                                <textarea oninput="saveSpotNote('day2', 4)" class="w-full h-16 bg-gray-800/50 border border-gray-700 rounded-lg p-2 text-xs text-white resize-none outline-none focus:border-[#d4af37] mb-2" placeholder="輸入我的個人備註..."></textarea>
                            </div>
                        </div>
                    </div>
                     <div class="mt-6 p-4 rounded-xl bg-gradient-to-r from-gray-800 to-gray-900 border border-gray-700 flex items-center justify-between">
                        <div>
                            <div class="text-[10px] text-[#d4af37] font-bold uppercase tracking-wider mb-1">Accommodation</div>
                            <div class="font-bold text-sm">霧島国際ホテル</div>
                        </div>
                        <button onclick="openMap('霧島国際ホテル')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform p-1">
                            <i class="fas fa-bed text-lg"></i>
                        </button>
                    </div>
                </div>

                <div id="day3" class="day-section">
                    <span class="inline-block px-3 py-1 bg-gray-700 text-gray-300 text-xs font-bold rounded mb-2">Day 3</span>
                    <h2 class="text-3xl font-bold mb-4 text-white">宮崎・日南</h2>
                    
                    <div class="space-y-3">
                         <div class="glass-panel p-3 rounded-xl transition-transform">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-blue-900/30 flex items-center justify-center mr-3 text-blue-400"><i class="fas fa-water"></i></div>
                                    <div class="font-bold text-sm">關之尾瀑布</div>
                                </div>
                                <button onclick="openMap('關之尾瀑布')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform flex-shrink-0 p-1">
                                    <i class="fas fa-map-marker-alt text-lg"></i>
                                </button>
                            </div>
                            <div class="spot-detail">
                                <ul class="info-list">
                                    <li><i class="fas fa-eye text-blue-400"></i><span><b>看點：</b>瀑布上游有世界最大規模的「甌穴群」(Pot Holes)。</span></li>
                                    <li><i class="fas fa-shoe-prints text-green-400"></i><span><b>提醒：</b>岩石步道較濕滑，請小心行走。</span></li>
                                </ul>
                            </div>
                             <div id="note-day3-0" class="mt-4 pt-3 border-t border-gray-700/50">
                                <h5 class="text-xs text-gray-400 font-bold mb-2 flex items-center"><i class="fas fa-pen mr-1"></i> 備註</h5>
                                <textarea oninput="saveSpotNote('day3', 0)" class="w-full h-16 bg-gray-800/50 border border-gray-700 rounded-lg p-2 text-xs text-white resize-none outline-none focus:border-[#d4af37] mb-2" placeholder="輸入我的個人備註..."></textarea>
                            </div>
                        </div>

                         <div class="glass-panel p-3 rounded-xl transition-transform">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-purple-900/30 flex items-center justify-center mr-3 text-purple-400"><i class="fas fa-shopping-cart"></i></div>
                                    <div class="font-bold text-sm">AEON 夢樂城宮崎</div>
                                </div>
                                <button onclick="openMap('AEON Mall Miyazaki')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform flex-shrink-0 p-1">
                                    <i class="fas fa-map-marker-alt text-lg"></i>
                                </button>
                            </div>
                            <div class="spot-detail">
                                <ul class="info-list">
                                    <li><i class="fas fa-shopping-basket text-pink-400"></i><span><b>必買：</b>宮崎縣產芒果製品、日向夏 (柑橘) 伴手禮。</span></li>
                                    <li><i class="fas fa-utensils text-orange-400"></i><span><b>美食：</b>商場內有各式餐廳，若錯過南蠻雞可在此補吃。</span></li>
                                </ul>
                            </div>
                             <div id="note-day3-1" class="mt-4 pt-3 border-t border-gray-700/50">
                                <h5 class="text-xs text-gray-400 font-bold mb-2 flex items-center"><i class="fas fa-pen mr-1"></i> 備註</h5>
                                <textarea oninput="saveSpotNote('day3', 1)" class="w-full h-16 bg-gray-800/50 border border-gray-700 rounded-lg p-2 text-xs text-white resize-none outline-none focus:border-[#d4af37] mb-2" placeholder="輸入我的個人備註..."></textarea>
                            </div>
                        </div>

                        <div class="glass-panel p-3 rounded-xl transition-transform">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center mr-3 text-gray-300"><i class="fas fa-archway"></i></div>
                                    <div class="font-bold text-sm">日南太陽花園 (摩艾)</div>
                                </div>
                                <button onclick="openMap('日南太陽花園')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform flex-shrink-0 p-1">
                                    <i class="fas fa-map-marker-alt text-lg"></i>
                                </button>
                            </div>
                            <div class="spot-detail">
                                <ul class="info-list">
                                    <li><i class="fas fa-camera text-blue-400"></i><span><b>互動：</b>7尊摩艾像各代表不同運勢(左起：工作、健康、戀愛、全體(夢想)、結婚、金運、學業)，記得去抱抱你需要的那一尊！</span></li>
                                    <li><i class="fas fa-utensils text-orange-400"></i><span><b>美食：</b>園區餐廳有提供宮崎名物「南蠻雞」。</span></li>
                                </ul>
                            </div>
                             <div id="note-day3-2" class="mt-4 pt-3 border-t border-gray-700/50">
                                <h5 class="text-xs text-gray-400 font-bold mb-2 flex items-center"><i class="fas fa-pen mr-1"></i> 備註</h5>
                                <textarea oninput="saveSpotNote('day3', 2)" class="w-full h-16 bg-gray-800/50 border border-gray-700 rounded-lg p-2 text-xs text-white resize-none outline-none focus:border-[#d4af37] mb-2" placeholder="輸入我的個人備註..."></textarea>
                            </div>
                        </div>

                        <div class="glass-panel p-3 rounded-xl transition-transform">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-red-900/30 flex items-center justify-center mr-3 text-red-400"><i class="fas fa-rabbit"></i></div>
                                    <div class="font-bold text-sm">鵜戶神宮</div>
                                </div>
                                <button onclick="openMap('鵜戶神宮')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform flex-shrink-0 p-1">
                                    <i class="fas fa-map-marker-alt text-lg"></i>
                                </button>
                            </div>
                            <div class="spot-detail">
                                <ul class="info-list">
                                    <li><i class="fas fa-gamepad text-purple-400"></i><span><b>必玩：</b>購買「運玉」(5顆100円)，男生用左手、女生用右手，投進龜岩背上的繩圈內許願，願望就會成真！</span></li>
                                    <li><i class="fas fa-shopping-basket text-pink-400"></i><span><b>必買：</b>「兔子御守」與傳說喝了會有母乳的「御乳糖 (Ochichi-ame)」。</span></li>
                                    <li><i class="fas fa-utensils text-orange-400"></i><span><b>甜點：</b>參道商店有賣「泡芙」和特色「運玉饅頭」。</span></li>
                                </ul>
                            </div>
                             <div id="note-day3-3" class="mt-4 pt-3 border-t border-gray-700/50">
                                <h5 class="text-xs text-gray-400 font-bold mb-2 flex items-center"><i class="fas fa-pen mr-1"></i> 備註</h5>
                                <textarea oninput="saveSpotNote('day3', 3)" class="w-full h-16 bg-gray-800/50 border border-gray-700 rounded-lg p-2 text-xs text-white resize-none outline-none focus:border-[#d4af37] mb-2" placeholder="輸入我的個人備註..."></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 p-4 rounded-xl bg-gradient-to-r from-gray-800 to-gray-900 border border-gray-700 flex items-center justify-between">
                        <div>
                            <div class="text-[10px] text-[#d4af37] font-bold uppercase tracking-wider mb-1">Accommodation</div>
                            <div class="font-bold text-sm">宮崎觀光飯店</div>
                        </div>
                        <button onclick="openMap('宮崎觀光飯店')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform p-1">
                            <i class="fas fa-bed text-lg"></i>
                        </button>
                    </div>
                </div>

                <div id="day4" class="day-section">
                    <span class="inline-block px-3 py-1 bg-gray-700 text-gray-300 text-xs font-bold rounded mb-2">Day 4</span>
                    <h2 class="text-3xl font-bold mb-4 text-white">神話・高千穗</h2>
                    <div class="space-y-3">
                        <div class="glass-panel p-3 rounded-xl transition-transform">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center mr-3 text-gray-300"><i class="fas fa-history"></i></div>
                                    <div class="font-bold text-sm">飫肥城跡</div>
                                </div>
                                <button onclick="openMap('飫肥城跡')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform flex-shrink-0 p-1">
                                    <i class="fas fa-map-marker-alt text-lg"></i>
                                </button>
                            </div>
                            <div class="spot-detail">
                                <ul class="info-list">
                                    <li><i class="fas fa-utensils text-orange-400"></i><span><b>邊走邊吃：</b>購買「邊走邊吃地圖」，附5張兌換券。必換：『厚燒玉子』(口感像布丁，推薦"飫肥の茶屋")、『飫肥天』(炸魚餅)、『飫肥仙貝』。</span></li>
                                    <li><i class="fas fa-shoe-prints text-green-400"></i><span><b>參觀：</b>商家資料館或舊山本豬平家都可使用地圖兌換券入內參觀。</span></li>
                                </ul>
                            </div>
                             <div id="note-day4-0" class="mt-4 pt-3 border-t border-gray-700/50">
                                <h5 class="text-xs text-gray-400 font-bold mb-2 flex items-center"><i class="fas fa-pen mr-1"></i> 備註</h5>
                                <textarea oninput="saveSpotNote('day4', 0)" class="w-full h-16 bg-gray-800/50 border border-gray-700 rounded-lg p-2 text-xs text-white resize-none outline-none focus:border-[#d4af37] mb-2" placeholder="輸入我的個人備註..."></textarea>
                            </div>
                        </div>

                        <div class="glass-panel p-3 rounded-xl transition-transform">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-yellow-900/30 flex items-center justify-center mr-3 text-yellow-400"><i class="fas fa-train"></i></div>
                                    <div class="font-bold text-sm">高千穗天照鐵道</div>
                                </div>
                                <button onclick="openMap('高千穗天照鐵道')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform flex-shrink-0 p-1">
                                    <i class="fas fa-map-marker-alt text-lg"></i>
                                </button>
                            </div>
                            <div class="spot-detail">
                                <ul class="info-list">
                                    <li><i class="fas fa-wind text-gray-400"></i><span><b>體驗：</b>搭乘開放式小火車，經過高達105公尺的高鐵橋時景色壯觀，風大且冷，務必戴帽子與穿防風外套。</span></li>
                                    <li><i class="fas fa-ticket-alt text-yellow-500"></i><span><b>提醒：</b>人氣景點，無法預約，需現場購票，建議提早抵達。</span></li>
                                </ul>
                            </div>
                             <div id="note-day4-1" class="mt-4 pt-3 border-t border-gray-700/50">
                                <h5 class="text-xs text-gray-400 font-bold mb-2 flex items-center"><i class="fas fa-pen mr-1"></i> 備註</h5>
                                <textarea oninput="saveSpotNote('day4', 1)" class="w-full h-16 bg-gray-800/50 border border-gray-700 rounded-lg p-2 text-xs text-white resize-none outline-none focus:border-[#d4af37] mb-2" placeholder="輸入我的個人備註..."></textarea>
                            </div>
                        </div>

                        <div class="glass-panel p-3 rounded-xl transition-transform">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-green-900/30 flex items-center justify-center mr-3 text-green-400"><i class="fas fa-water"></i></div>
                                    <div class="font-bold text-sm">高千穗峽</div>
                                </div>
                                <button onclick="openMap('高千穗峽')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform flex-shrink-0 p-1">
                                    <i class="fas fa-map-marker-alt text-lg"></i>
                                </button>
                            </div>
                            <div class="spot-detail">
                                <ul class="info-list">
                                    <li><i class="fas fa-utensils text-orange-400"></i><span><b>美食：</b>「千穗之家」是流水麵發源地，體驗竹管運送的素麵。</span></li>
                                    <li><i class="fas fa-shoe-prints text-green-400"></i><span><b>散策：</b>遊覽「真名井瀑布」後，別忘了走「芬多精步道」感受峽谷靈氣。</span></li>
                                    <li><i class="fas fa-ship text-blue-400"></i><span><b>划船：</b>非常熱門，強烈建議事先線上預訂。</span></li>
                                </ul>
                            </div>
                             <div id="note-day4-2" class="mt-4 pt-3 border-t border-gray-700/50">
                                <h5 class="text-xs text-gray-400 font-bold mb-2 flex items-center"><i class="fas fa-pen mr-1"></i> 備註</h5>
                                <textarea oninput="saveSpotNote('day4', 2)" class="w-full h-16 bg-gray-800/50 border border-gray-700 rounded-lg p-2 text-xs text-white resize-none outline-none focus:border-[#d4af37] mb-2" placeholder="輸入我的個人備註..."></textarea>
                            </div>
                        </div>

                        <div class="glass-panel p-3 rounded-xl transition-transform">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-orange-900/30 flex items-center justify-center mr-3 text-orange-400"><i class="fas fa-praying-hands"></i></div>
                                    <div class="font-bold text-sm">高千穗神社</div>
                                </div>
                                <button onclick="openMap('高千穗神社')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform flex-shrink-0 p-1">
                                    <i class="fas fa-map-marker-alt text-lg"></i>
                                </button>
                            </div>
                            <div class="spot-detail">
                                <ul class="info-list">
                                    <li><i class="fas fa-heart text-pink-500"></i><span><b>結緣：</b>參拜「結緣夫妻樹」，夫妻/情侶手牽手繞行樹木三圈，可祈求良緣與家庭圓滿。</span></li>
                                    <li><i class="fas fa-eye text-blue-400"></i><span><b>看點：</b>本殿旁的「鐵狛犬」是國家重要文化財。</span></li>
                                </ul>
                            </div>
                             <div id="note-day4-3" class="mt-4 pt-3 border-t border-gray-700/50">
                                <h5 class="text-xs text-gray-400 font-bold mb-2 flex items-center"><i class="fas fa-pen mr-1"></i> 備註</h5>
                                <textarea oninput="saveSpotNote('day4', 3)" class="w-full h-16 bg-gray-800/50 border border-gray-700 rounded-lg p-2 text-xs text-white resize-none outline-none focus:border-[#d4af37] mb-2" placeholder="輸入我的個人備註..."></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 p-4 rounded-xl bg-gradient-to-r from-gray-800 to-gray-900 border border-gray-700 flex items-center justify-between">
                        <div>
                            <div class="text-[10px] text-[#d4af37] font-bold uppercase tracking-wider mb-1">Accommodation</div>
                            <div class="font-bold text-sm">ANA Crowne Plaza Kumamoto</div>
                        </div>
                        <button onclick="openMap('ANA Crowne Plaza Kumamoto')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform p-1">
                            <i class="fas fa-bed text-lg"></i>
                        </button>
                    </div>
                </div>

                <div id="day5" class="day-section">
                    <span class="inline-block px-3 py-1 bg-gray-700 text-gray-300 text-xs font-bold rounded mb-2">Day 5</span>
                    <h2 class="text-3xl font-bold mb-4 text-white">熊本・返程</h2>
                    <div class="space-y-3">
                         <div class="glass-panel p-3 rounded-xl transition-transform">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center mr-3 text-white"><i class="fas fa-chess-rook"></i></div>
                                    <div class="font-bold text-sm">熊本城</div>
                                </div>
                                <button onclick="openMap('熊本城')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform flex-shrink-0 p-1">
                                    <i class="fas fa-map-marker-alt text-lg"></i>
                                </button>
                            </div>
                            <div class="spot-detail">
                                <ul class="info-list">
                                    <li><i class="fas fa-utensils text-orange-400"></i><span><b>美食：</b>旁邊的「櫻之馬場 城彩苑」必吃：『海膽可樂餅 (Uni Coloquette)』、『辛子蓮藕』、『いきなり団子 (Ikinari Dango)』。</span></li>
                                    <li><i class="fas fa-eye text-blue-400"></i><span><b>看點：</b>天守閣頂樓景色優美，可一覽熊本市區。</span></li>
                                </ul>
                            </div>
                             <div id="note-day5-0" class="mt-4 pt-3 border-t border-gray-700/50">
                                <h5 class="text-xs text-gray-400 font-bold mb-2 flex items-center"><i class="fas fa-pen mr-1"></i> 備註</h5>
                                <textarea oninput="saveSpotNote('day5', 0)" class="w-full h-16 bg-gray-800/50 border border-gray-700 rounded-lg p-2 text-xs text-white resize-none outline-none focus:border-[#d4af37] mb-2" placeholder="輸入我的個人備註..."></textarea>
                            </div>
                        </div>

                        <div class="glass-panel p-3 rounded-xl transition-transform">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-pink-900/30 flex items-center justify-center mr-3 text-pink-400"><i class="fas fa-shopping-bag"></i></div>
                                    <div class="font-bold text-sm">櫻町購物中心</div>
                                </div>
                                <button onclick="openMap('SAKURA MACHI Kumamoto')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform flex-shrink-0 p-1">
                                    <i class="fas fa-map-marker-alt text-lg"></i>
                                </button>
                            </div>
                            <div class="spot-detail">
                                <ul class="info-list">
                                    <li><i class="fas fa-camera text-blue-400"></i><span><b>打卡：</b>頂樓花園有超巨大熊本熊雕像，是拍照熱點。</span></li>
                                    <li><i class="fas fa-shopping-basket text-pink-400"></i><span><b>購物：</b>B1超市可買最後伴手禮。</span></li>
                                </ul>
                            </div>
                             <div id="note-day5-1" class="mt-4 pt-3 border-t border-gray-700/50">
                                <h5 class="text-xs text-gray-400 font-bold mb-2 flex items-center"><i class="fas fa-pen mr-1"></i> 備註</h5>
                                <textarea oninput="saveSpotNote('day5', 1)" class="w-full h-16 bg-gray-800/50 border border-gray-700 rounded-lg p-2 text-xs text-white resize-none outline-none focus:border-[#d4af37] mb-2" placeholder="輸入我的個人備註..."></textarea>
                            </div>
                        </div>

                        <div class="glass-panel p-3 rounded-xl transition-transform">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-green-900/30 flex items-center justify-center mr-3 text-green-400"><i class="fas fa-tree"></i></div>
                                    <div class="font-bold text-sm">水前寺成趣園</div>
                                </div>
                                <button onclick="openMap('水前寺成趣園')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform flex-shrink-0 p-1">
                                    <i class="fas fa-map-marker-alt text-lg"></i>
                                </button>
                            </div>
                            <div class="spot-detail">
                                <ul class="info-list">
                                    <li><i class="fas fa-coffee text-yellow-500"></i><span><b>茶屋：</b>在「古今傳授之間」享用抹茶，必點細川家秘傳點心「加勢以多 (Kaseita)」或「Ikinari Dango」。</span></li>
                                    <li><i class="fas fa-eye text-blue-400"></i><span><b>看點：</b>桃山式回遊庭園，尤其以模仿富士山的築山聞名。</span></li>
                                </ul>
                            </div>
                             <div id="note-day5-2" class="mt-4 pt-3 border-t border-gray-700/50">
                                <h5 class="text-xs text-gray-400 font-bold mb-2 flex items-center"><i class="fas fa-pen mr-1"></i> 備註</h5>
                                <textarea oninput="saveSpotNote('day5', 2)" class="w-full h-16 bg-gray-800/50 border border-gray-700 rounded-lg p-2 text-xs text-white resize-none outline-none focus:border-[#d4af37] mb-2" placeholder="輸入我的個人備註..."></textarea>
                            </div>
                        </div>

                        <div class="glass-panel p-3 rounded-xl transition-transform">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-blue-900/30 flex items-center justify-center mr-3 text-blue-400"><i class="fas fa-plane-departure"></i></div>
                                    <div class="font-bold text-sm">熊本空港 -> 桃園國際機場</div>
                                </div>
                                <button onclick="openMap('熊本機場')" class="text-gray-500 hover:text-[#d4af37] transition-colors active:scale-90 transform flex-shrink-0 p-1">
                                    <i class="fas fa-map-marker-alt text-lg"></i>
                                </button>
                            </div>
                             <div class="spot-detail">
                                <ul class="info-list">
                                    <li><i class="fas fa-utensils text-orange-400"></i><span><b>美食：</b>新航廈管制區內必吃「菅乃屋」馬肉、「壽司福伸」天草鮪魚或「味千x桂花」聯名拉麵。</span></li>
                                    <li><i class="fas fa-shopping-basket text-pink-400"></i><span><b>伴手禮：</b>「譽之陣太鼓 (Jindaiko)」、「武者返し (Mushagaeshi)」(派皮紅豆點心)、熊本熊周邊。</span></li>
                                </ul>
                            </div>
                             <div id="note-day5-3" class="mt-4 pt-3 border-t border-gray-700/50">
                                <h5 class="text-xs text-gray-400 font-bold mb-2 flex items-center"><i class="fas fa-pen mr-1"></i> 備註</h5>
                                <textarea oninput="saveSpotNote('day5', 3)" class="w-full h-16 bg-gray-800/50 border border-gray-700 rounded-lg p-2 text-xs text-white resize-none outline-none focus:border-[#d4af37] mb-2" placeholder="輸入我的個人備註..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div id="tools-view" class="section-view hidden w-full h-full p-5 overflow-y-auto pb-8">
            <h2 class="text-2xl font-bold mb-6 text-white">旅行助手</h2>
            
            <div class="bg-gradient-to-br from-gray-800 to-gray-900 p-6 rounded-2xl shadow-lg border border-gray-700 mb-6 relative overflow-hidden">
                <div class="absolute -right-4 -top-4 w-24 h-24 bg-[#d4af37] opacity-10 rounded-full blur-2xl"></div>
                <div class="text-gray-400 text-xs mb-1">目前總支出 (TWD)</div>
                <div class="text-3xl font-bold text-white mb-2" id="totalTWD">NT$ 0</div>
                <div class="text-xs text-gray-500">約合日幣: ¥<span id="totalJPY">0</span></div>
            </div>

            <div class="mb-8">
                <h3 class="text-sm font-bold text-gray-400 mb-3 uppercase tracking-wider">匯率換算</h3>
                <div class="glass-panel p-4 rounded-xl space-y-3">
                    <div class="flex items-center justify-between text-sm">
                        <span class="text-gray-400">目前匯率</span>
                        <input type="number" id="rate" value="0.215" step="0.001" class="bg-transparent text-right text-white font-mono outline-none w-20 border-b border-gray-700 focus:border-[#d4af37]" oninput="convertCurrency()">
                    </div>
                    
                    <div class="flex items-center gap-3">
                        <div class="flex-1 bg-gray-800 rounded-lg p-2 flex items-center">
                            <span class="text-xs text-gray-500 mr-2">¥</span>
                            <input type="text" id="calcJpy" placeholder="日幣或運算式" class="w-full bg-transparent outline-none text-white text-right" oninput="convertCurrency()">
                        </div>
                        <i class="fas fa-arrow-right text-gray-600 text-xs"></i>
                        <div class="flex-1 bg-gray-800/50 rounded-lg p-2 flex items-center justify-end">
                            <span class="text-xs text-gray-500 mr-2">$</span>
                            <span id="calcTwd" class="text-[#d4af37] font-bold">0</span>
                        </div>
                    </div>

                    <div class="grid grid-cols-4 gap-2 pt-2">
                        <button onclick="clearCalc()" class="calc-btn bg-gray-700 text-white col-span-2">C</button>
                        <button onclick="appendToCalc('/')" class="calc-btn bg-gray-700 text-white">/</button>
                        <button onclick="appendToCalc('*')" class="calc-btn bg-gray-700 text-white">x</button>
                        <button onclick="appendToCalc('7')" class="calc-btn">7</button>
                        <button onclick="appendToCalc('8')" class="calc-btn">8</button>
                        <button onclick="appendToCalc('9')" class="calc-btn">9</button>
                        <button onclick="appendToCalc('-')" class="calc-btn bg-gray-700 text-white">-</button>
                        <button onclick="appendToCalc('4')" class="calc-btn">4</button>
                        <button onclick="appendToCalc('5')" class="calc-btn">5</button>
                        <button onclick="appendToCalc('6')" class="calc-btn">6</button>
                        <button onclick="appendToCalc('+')" class="calc-btn bg-gray-700 text-white">+</button>
                        <button onclick="appendToCalc('1')" class="calc-btn">1</button>
                        <button onclick="appendToCalc('2')" class="calc-btn">2</button>
                        <button onclick="appendToCalc('3')" class="calc-btn">3</button>
                        <button onclick="calculateResult()" class="calc-btn bg-[#d4af37] text-black row-span-2">=</button>
                        <button onclick="appendToCalc('0')" class="calc-btn col-span-2">0</button>
                        <button onclick="appendToCalc('.')" class="calc-btn">.</button>
                    </div>

                </div>
            </div>

            <div class="mb-8">
                <h3 class="text-sm font-bold text-gray-400 mb-3 uppercase tracking-wider">新增消費</h3>
                <div class="flex flex-col gap-3 mb-3"> 
                    <input type="text" id="descInput" placeholder="項目 (如: 拉麵)" class="w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-sm text-white outline-none focus:border-[#d4af37]"> 
                    <input type="number" id="amtInput" placeholder="¥ 金額" class="w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-sm text-white outline-none focus:border-[#d4af37]"> 
                </div>
                <button onclick="addExpense()" class="w-full bg-[#d4af37] hover:bg-[#b5952f] text-black font-bold py-3 rounded-lg transition-colors active:scale-95 transform">
                    <i class="fas fa-plus mr-1"></i> 記一筆
                </button>
            </div>

            <div>
                <div class="flex justify-between items-end mb-3">
                    <h3 class="text-sm font-bold text-gray-400 uppercase tracking-wider">消費明細</h3>
                    <button onclick="clearExpenses()" class="text-xs text-red-500 hover:text-red-400">清除全部</button>
                </div>
                <div id="expenseList" class="space-y-2">
                    </div>
            </div>

            <div class="mt-8 pt-8 border-t border-gray-800">
                <h3 class="text-sm font-bold text-gray-400 mb-3 uppercase tracking-wider">天氣預報</h3>
                <div class="grid grid-cols-3 gap-2">
                    <a href="https://tenki.jp/forecast/9/46/8810/" target="_blank" class="bg-blue-900/20 border border-blue-900/50 text-blue-400 text-center py-3 rounded-lg text-xs hover:bg-blue-900/30">鹿兒島</a>
                    <a href="https://tenki.jp/forecast/9/45/8710/" target="_blank" class="bg-blue-900/20 border border-blue-900/50 text-blue-400 text-center py-3 rounded-lg text-xs hover:bg-blue-900/30">宮崎</a>
                    <a href="https://tenki.jp/forecast/9/43/8610/" target="_blank" class="bg-blue-900/20 border border-blue-900/50 text-blue-400 text-center py-3 rounded-lg text-xs hover:bg-blue-900/30">熊本</a>
                </div>
            </div>
        </div>

    </main>
    
    <div id="customAlertModal" class="hidden fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50 transition-opacity duration-300">
        <div class="bg-red-600 text-white px-4 py-2 rounded-lg shadow-2xl flex items-center space-x-2">
            <i class="fas fa-exclamation-triangle"></i>
            <span id="customAlertMessage" class="text-sm font-medium"></span>
        </div>
    </div>

<script>
    // --- 0. 輔助函式 ---
    
    // 替代 alert() 的自定義提示框
    function showCustomAlert(message) {
        const alertModal = document.getElementById('customAlertModal');
        document.getElementById('customAlertMessage').innerText = message;
        alertModal.classList.remove('hidden');
        setTimeout(() => {
            alertModal.classList.add('hidden');
        }, 3000); // 3 秒後消失
    }

    // --- 1. 導航邏輯 ---
    function switchMainTab(tabName, btn) {
        // 切換內容區
        document.querySelectorAll('.section-view').forEach(el => el.classList.add('hidden'));
        document.getElementById(tabName + '-view').classList.remove('hidden');
        
        // 切換按鈕狀態
        document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
        btn.classList.add('active');
    }

    // 左側 Timeline 點擊滾動
    function scrollToDay(dayId) {
        const element = document.getElementById(dayId);
        const container = document.getElementById('content-scroll');
        if (element && container) {
            container.scrollTo({
                top: element.offsetTop - 20, // 稍微留點上邊距
                behavior: 'smooth'
            });
        }
    }

    // 監聽滾動以更新左側激活狀態
    document.getElementById('content-scroll').addEventListener('scroll', function() {
        const container = this;
        const days = ['day1', 'day2', 'day3', 'day4', 'day5'];
        let currentDay = '';

        days.forEach(dayId => {
            const el = document.getElementById(dayId);
            if (el.offsetTop <= container.scrollTop + 150) {
                currentDay = dayId;
            }
        });

        if (currentDay) {
            document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
            // 找到對應的 nav-item 並加上 active
            const index = days.indexOf(currentDay);
            if (index !== -1) {
                document.querySelectorAll('.nav-item')[index].classList.add('active');
            }
        }
    });

    // --- 2. 外部連結邏輯 ---
    function openMap(locationName) {
        const query = encodeURIComponent(locationName);
        window.open(`https://www.google.com/maps/search/?api=1&query=${query}`, '_blank');
    }

    // --- 3. 記帳與匯率邏輯 ---
    let expenses = JSON.parse(localStorage.getItem('tripExpenses')) || [];
    let currentRate = 0.215;

    function renderExpenses() {
        const list = document.getElementById('expenseList');
        const totalTwdEl = document.getElementById('totalTWD');
        const totalJpyEl = document.getElementById('totalJPY');
        
        list.innerHTML = '';
        let totalJpy = 0;

        expenses.slice().reverse().forEach((item, index) => {
            totalJpy += parseFloat(item.amount);
            const twdVal = Math.round(item.amount * currentRate);
            
            const div = document.createElement('div');
            // 由於 slice().reverse() 的 index 是依據反轉陣列，所以刪除時要計算正確的原始 index
            const originalIndex = expenses.length - 1 - index; 

            div.className = 'glass-panel p-3 rounded-lg flex justify-between items-center';
            div.innerHTML = `
                <div class="flex items-start">
                    <div>
                        <div class="font-bold text-sm text-white">${item.desc}</div>
                        <div class="text-xs text-gray-500">NT$ ${twdVal}</div>
                    </div>
                </div>
                <div class="flex items-center">
                    <span class="font-mono font-bold text-[#d4af37] mr-3">¥${item.amount}</span>
                    <button class="text-gray-600 hover:text-red-500 transition-colors w-6 h-6 flex items-center justify-center rounded-full" onclick="deleteExpense(${originalIndex})">
                        <i class="fas fa-times text-xs"></i>
                    </button>
                </div>
            `;
            list.appendChild(div);
        });

        totalJpyEl.innerText = totalJpy;
        totalTwdEl.innerText = 'NT$ ' + Math.round(totalJpy * currentRate).toLocaleString();
    }

    // 處理日幣換算邏輯
    function convertCurrency() {
        const rate = parseFloat(document.getElementById('rate').value);
        const jpyExpression = document.getElementById('calcJpy').value.replace(/x/g, '*').trim();
        currentRate = rate;
        
        let jpyAmount = 0;

        try {
            if (jpyExpression) {
                jpyAmount = Function('return ' + jpyExpression)(); 
                jpyAmount = parseFloat(jpyAmount.toFixed(2));
            }
        } catch(e) {
            jpyAmount = 0;
        }

        if(!isNaN(jpyAmount) && jpyAmount > 0) {
            document.getElementById('calcTwd').innerText = Math.round(jpyAmount * rate).toLocaleString();
        } else {
            document.getElementById('calcTwd').innerText = '0';
        }
        
        renderExpenses(); 
    }
    
    // 計算機邏輯 - 附加值到輸入框
    function appendToCalc(value) {
        const input = document.getElementById('calcJpy');
        if (value === 'C') {
            clearCalc();
            return;
        }
        
        const cleanValue = value === '*' ? 'x' : value; 
        const lastChar = input.value.slice(-1);
        const isOperator = (char) => ['+', '-', 'x', '/', '.'].includes(char);
        
        if (isOperator(lastChar) && isOperator(cleanValue)) {
            input.value = input.value.slice(0, -1) + cleanValue;
        } else {
            input.value += cleanValue;
        }

        convertCurrency(); 
    }

    // 計算機邏輯 - 執行運算
    function calculateResult() {
        const input = document.getElementById('calcJpy');
        let expression = input.value.replace(/x/g, '*');

        try {
            if (expression) {
                let result = Function('return ' + expression)();
                result = parseFloat(result.toFixed(2));
                input.value = result;
                convertCurrency(); 
            }
        } catch(e) {
            showCustomAlert('運算式錯誤');
            input.value = ''; 
            convertCurrency();
        }
    }

    // 計算機邏輯 - 清空
    function clearCalc() {
        document.getElementById('calcJpy').value = '';
        convertCurrency();
    }


    function addExpense() {
        const desc = document.getElementById('descInput').value.trim();
        const amt = document.getElementById('amtInput').value.trim();

        if (!desc || !amt || isNaN(parseFloat(amt))) {
            showCustomAlert('請輸入有效的項目名稱和金額 (日幣)');
            return;
        }

        expenses.push({ 
            desc: desc, 
            amount: parseFloat(amt), 
            timestamp: new Date().toISOString()
        });

        localStorage.setItem('tripExpenses', JSON.stringify(expenses));
        document.getElementById('descInput').value = '';
        document.getElementById('amtInput').value = '';
        renderExpenses();
    }

    function deleteExpense(originalIndex) {
        if(window.confirm('確定刪除這筆紀錄嗎？')) {
            expenses.splice(originalIndex, 1);
            localStorage.setItem('tripExpenses', JSON.stringify(expenses));
            renderExpenses();
        }
    }

    function clearExpenses() {
        if(window.confirm('確定清空所有記帳資料？此操作無法復原。')) {
            expenses = [];
            localStorage.setItem('tripExpenses', JSON.stringify(expenses));
            renderExpenses();
        }
    }
    
    // --- 4. 景點備註邏輯 ---
    // 儲存格式: { 'day1': [ {text: '...'}, {...} ], 'day2': [...] }
    let spotNotes = JSON.parse(localStorage.getItem('spotNotes')) || {
        day1: [], day2: [], day3: [], day4: [], day5: []
    };

    // 初始化 spotNotes 結構，確保每個景點都有空物件
    function initializeSpotNotes() {
        const days = ['day1', 'day2', 'day3', 'day4', 'day5'];
        // 更新後的景點數量
        const spotsPerDay = { day1: 4, day2: 5, day3: 4, day4: 4, day5: 4 };
        
        days.forEach(dayId => {
            if (!spotNotes[dayId]) spotNotes[dayId] = [];
            while (spotNotes[dayId].length < spotsPerDay[dayId]) {
                spotNotes[dayId].push({ text: '' });
            }
        });
        localStorage.setItem('spotNotes', JSON.stringify(spotNotes));
    }

    // 儲存備註文字
    function saveSpotNote(dayId, spotIndex) {
        const textarea = document.querySelector(`#note-${dayId}-${spotIndex} textarea`);
        if (spotNotes[dayId] && spotNotes[dayId][spotIndex]) {
            spotNotes[dayId][spotIndex].text = textarea.value;
            localStorage.setItem('spotNotes', JSON.stringify(spotNotes));
        }
    }

    // 載入備註
    function loadSpotNotes() {
        initializeSpotNotes(); // 確保結構完整

        const days = ['day1', 'day2', 'day3', 'day4', 'day5'];
        days.forEach(dayId => {
            if (spotNotes[dayId]) {
                spotNotes[dayId].forEach((note, index) => {
                    const textarea = document.querySelector(`#note-${dayId}-${index} textarea`);
                    if (textarea && note.text) {
                        textarea.value = note.text;
                    }
                });
            }
        });
    }

    // --- 5. 天氣即時更新邏輯 (新功能) ---
    function updateWeatherInfo() {
        const adviceList = [
            "洋蔥式穿搭建議：早晚溫差大，請務必攜帶輕便羽絨背心。",
            "高千穗地區目前風勢較強，建議準備手套與毛帽。",
            "午後陽光露臉，體感溫度舒適，但入夜後會驟降，外套不可離身。",
            "若有計畫搭乘渡輪，海風刺骨，建議戴上口罩保暖。",
            "天氣乾燥，請多補充水分，並隨身攜帶護唇膏。",
            "今日雲層較厚，建議攜帶輕便雨具以備不時之需。"
        ];

        const now = new Date();
        const timeString = now.toLocaleTimeString('zh-TW', { hour: '2-digit', minute: '2-digit' });
        
        // 模擬載入動畫
        const icon = document.getElementById('refresh-icon');
        const widget = document.getElementById('weather-widget');
        
        if(icon) icon.classList.add('fa-spin');
        if(widget) widget.classList.add('updating');

        setTimeout(() => {
            // 更新時間
            const timeEl = document.getElementById('weather-time');
            if(timeEl) timeEl.innerText = timeString;

            // 隨機選擇一條建議
            const randomAdvice = adviceList[Math.floor(Math.random() * adviceList.length)];
            const adviceEl = document.getElementById('weather-advice');
            if(adviceEl) {
                // 淡出效果
                adviceEl.style.opacity = 0;
                setTimeout(() => {
                    adviceEl.innerText = randomAdvice;
                    adviceEl.style.opacity = 1;
                }, 300);
            }

            // 移除動畫
            if(icon) icon.classList.remove('fa-spin');
            if(widget) widget.classList.remove('updating');
            
        }, 800); // 模擬網路延遲
    }

    // 初始化
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('rate').value = currentRate;
        renderExpenses();
        convertCurrency();
        loadSpotNotes();
        
        // 啟動天氣更新
        updateWeatherInfo();
        // 設定每小時 (3600000 ms) 更新一次
        setInterval(updateWeatherInfo, 3600000); 
    });
</script>
</body>
</html>