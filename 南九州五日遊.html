<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>南九州五日遊 - 深度攻略版</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-dark: #121212;
            --bg-card: #1e1e1e;
            --accent: #d4af37; /* 金色 */
            --accent-light: #f1c40f;
            --text-main: #ffffff;
            --text-sub: #a0a0a0;
        }
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: black;
            color: var(--text-main);
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        /* 隱藏 Scrollbar 但保留功能 */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* 玻璃擬態 */
        .glass-panel {
            background: rgba(30, 30, 30, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        /* 左側導航激活狀態 */
        .nav-item.active {
            color: var(--accent);
            position: relative;
        }
        .nav-item.active::after {
            content: '';
            position: absolute;
            left: -12px;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 20px;
            background-color: var(--accent);
            border-radius: 0 4px 4px 0;
        }

        /* 底部導航激活狀態 */
        .tab-btn.active {
            color: var(--accent);
        }
        .tab-btn.active i {
            transform: translateY(-2px);
            transition: transform 0.2s;
        }

        /* 小撇步區塊樣式 */
        .tip-box {
            background: rgba(212, 175, 55, 0.1);
            border-left: 4px solid var(--accent);
        }

        /* 詳細資訊文字樣式 */
        .spot-detail {
            font-size: 0.75rem;
            color: #ccc;
            margin-top: 0.5rem;
            padding-top: 0.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            line-height: 1.5;
        }
        .spot-tag {
            color: #d4af37;
            font-weight: bold;
            margin-right: 4px;
        }
    </style>
</head>
<body class="h-screen flex flex-col max-w-md mx-auto relative shadow-2xl shadow-gray-900 border-x border-gray-800">

    <!-- 頂部狀態列模擬 -->
    <div class="h-12 flex items-center justify-between px-5 bg-opacity-90 bg-[#121212] backdrop-blur-sm z-50 sticky top-0 border-b border-gray-800">
        <span class="text-sm font-bold text-gray-400">南九州之旅</span>
        <div class="flex items-center space-x-2">
            <span class="text-xs px-2 py-1 bg-gray-800 rounded-full text-gray-400">5 Days</span>
        </div>
    </div>

    <!-- 主要內容區 (可滾動) -->
    <main class="flex-1 overflow-hidden relative bg-[#121212]">
        
        <!-- 1. 行程頁面 (包含左側 Timeline) -->
        <div id="itinerary-view" class="section-view w-full h-full flex">
            
            <!-- 左側導航 (Timeline) -->
            <div class="w-20 bg-[#181818] h-full flex flex-col items-center py-4 space-y-8 overflow-y-auto no-scrollbar border-r border-gray-800 z-10">
                <div onclick="scrollToDay('day1')" class="nav-item active flex flex-col items-center cursor-pointer transition-colors duration-300 text-gray-500 hover:text-gray-300">
                    <div class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center mb-1 shadow-lg">
                        <i class="fas fa-plane text-sm"></i>
                    </div>
                    <span class="text-[10px] font-bold">Day 1</span>
                    <span class="text-[9px]">12/4</span>
                </div>

                <div onclick="scrollToDay('day2')" class="nav-item flex flex-col items-center cursor-pointer transition-colors duration-300 text-gray-500 hover:text-gray-300">
                    <div class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center mb-1 shadow-lg">
                        <i class="fas fa-mountain text-sm"></i>
                    </div>
                    <span class="text-[10px] font-bold">Day 2</span>
                    <span class="text-[9px]">12/5</span>
                </div>

                <div onclick="scrollToDay('day3')" class="nav-item flex flex-col items-center cursor-pointer transition-colors duration-300 text-gray-500 hover:text-gray-300">
                    <div class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center mb-1 shadow-lg">
                        <i class="fas fa-water text-sm"></i>
                    </div>
                    <span class="text-[10px] font-bold">Day 3</span>
                    <span class="text-[9px]">12/6</span>
                </div>

                <div onclick="scrollToDay('day4')" class="nav-item flex flex-col items-center cursor-pointer transition-colors duration-300 text-gray-500 hover:text-gray-300">
                    <div class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center mb-1 shadow-lg">
                        <i class="fas fa-torii-gate text-sm"></i>
                    </div>
                    <span class="text-[10px] font-bold">Day 4</span>
                    <span class="text-[9px]">12/7</span>
                </div>

                <div onclick="scrollToDay('day5')" class="nav-item flex flex-col items-center cursor-pointer transition-colors duration-300 text-gray-500 hover:text-gray-300">
                    <div class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center mb-1 shadow-lg">
                        <i class="fas fa-suitcase text-sm"></i>
                    </div>
                    <span class="text-[10px] font-bold">Day 5</span>
                    <span class="text-[9px]">12/8</span>
                </div>
            </div>

            <!-- 右側內容 (Content) -->
            <div id="content-scroll" class="flex-1 h-full overflow-y-auto bg-black p-4 space-y-16 pb-24 scroll-smooth">
                
                <!-- Day 1 Content -->
                <div id="day1" class="day-section pt-2">
                    <span class="inline-block px-3 py-1 bg-[#d4af37] text-black text-xs font-bold rounded mb-2">Day 1 • 12/4 (四)</span>
                    <h2 class="text-3xl font-bold mb-4 text-white">鹿兒島・抵達</h2>
                    
                    <!-- 12月天氣指南 -->
                    <div class="bg-blue-900/20 border border-blue-800 rounded-lg p-3 mb-6">
                        <h4 class="text-blue-400 text-xs font-bold mb-2"><i class="fas fa-temperature-low mr-1"></i> 12月天氣與穿搭</h4>
                        <p class="text-gray-300 text-xs leading-5">
                            <span class="text-white">氣溫：</span> 平均 5°C ~ 15°C，早晚溫差大。<br>
                            <span class="text-white">建議：</span> 洋蔥式穿搭。發熱衣、毛衣、防風外套(羽絨)是必備。建議攜帶圍巾與折疊傘(偶有雨)。
                        </p>
                    </div>

                    <p class="text-gray-400 text-sm mb-6 leading-relaxed">
                        抵達鹿兒島，感受南九州的熱情。首站前往武家屋敷體驗歷史，晚上在天文館商店街享受美食與購物。
                    </p>

                    <!-- 景點列表 -->
                    <div class="space-y-3">
                        <div onclick="openMap('鹿兒島空港')" class="glass-panel p-3 rounded-xl active:scale-95 transition-transform cursor-pointer">
                            <div class="flex items-center mb-1">
                                <div class="w-8 h-8 rounded-full bg-blue-900/30 flex items-center justify-center mr-3 text-blue-400"><i class="fas fa-plane-arrival"></i></div>
                                <div class="font-bold text-sm">鹿兒島空港</div>
                            </div>
                            <div class="spot-detail">
                                <span class="spot-tag"><i class="fas fa-info-circle"></i> 建議：</span>機場外有天然溫泉足湯「おやっとさぁ」可免費體驗，毛巾需自備或現場買。
                            </div>
                        </div>

                        <div onclick="openMap('知覽武家屋敷')" class="glass-panel p-3 rounded-xl active:scale-95 transition-transform cursor-pointer">
                            <div class="flex items-center mb-1">
                                <div class="w-8 h-8 rounded-full bg-orange-900/30 flex items-center justify-center mr-3 text-orange-400"><i class="fas fa-landmark"></i></div>
                                <div class="font-bold text-sm">知覽武家屋敷</div>
                            </div>
                            <div class="spot-detail">
                                <div><span class="spot-tag"><i class="fas fa-utensils"></i> 美食：</span>高城庵 (鄉土料理)，必吃「雞肉刺身」與「薩摩炸魚餅」。</div>
                                <div class="mt-1"><span class="spot-tag"><i class="fas fa-info-circle"></i> 建議：</span>這裡被稱為「薩摩的小京都」，七個庭園各有特色，建議預留 1.5 小時慢慢散步。</div>
                            </div>
                        </div>

                        <div onclick="openMap('天文館商店街')" class="glass-panel p-3 rounded-xl active:scale-95 transition-transform cursor-pointer">
                            <div class="flex items-center mb-1">
                                <div class="w-8 h-8 rounded-full bg-pink-900/30 flex items-center justify-center mr-3 text-pink-400"><i class="fas fa-shopping-bag"></i></div>
                                <div class="font-bold text-sm">天文館商店街</div>
                            </div>
                            <div class="spot-detail">
                                <div><span class="spot-tag"><i class="fas fa-utensils"></i> 美食：</span>「鰻魚末吉」炭烤鰻魚飯、「天文館無邪氣」白熊冰、「蜂樂饅頭」。</div>
                                <div class="mt-1"><span class="spot-tag"><i class="fas fa-info-circle"></i> 建議：</span>藥妝店激戰區，建議先比價。晚餐建議預約黑豚涮涮鍋 (如: 吾愛人)。</div>
                            </div>
                        </div>
                    </div>

                    <!-- 住宿卡片 -->
                    <div onclick="openMap('城山ホテル鹿児島')" class="mt-6 p-4 rounded-xl bg-gradient-to-r from-gray-800 to-gray-900 border border-gray-700 flex items-center justify-between cursor-pointer">
                        <div>
                            <div class="text-[10px] text-[#d4af37] font-bold uppercase tracking-wider mb-1">Accommodation</div>
                            <div class="font-bold text-sm">城山ホテル鹿児島</div>
                        </div>
                        <i class="fas fa-bed text-gray-500"></i>
                    </div>
                </div>

                <!-- Day 2 Content -->
                <div id="day2" class="day-section">
                    <span class="inline-block px-3 py-1 bg-gray-700 text-gray-300 text-xs font-bold rounded mb-2">Day 2 • 12/5 (五)</span>
                    <h2 class="text-3xl font-bold mb-4 text-white">櫻島・霧島</h2>
                    <p class="text-gray-400 text-sm mb-6">搭乘渡輪前往活火山櫻島，感受大自然的震撼，隨後前往霧島參拜神宮。</p>

                    <div class="space-y-3">
                        <div onclick="openMap('城山公園展望台')" class="glass-panel p-3 rounded-xl active:scale-95 transition-transform cursor-pointer">
                            <div class="flex items-center mb-1">
                                <div class="w-8 h-8 rounded-full bg-green-900/30 flex items-center justify-center mr-3 text-green-400"><i class="fas fa-binoculars"></i></div>
                                <div class="font-bold text-sm">城山公園展望台</div>
                            </div>
                            <div class="spot-detail">
                                <span class="spot-tag"><i class="fas fa-info-circle"></i> 建議：</span>拍攝櫻島火山的最佳位置。如果早起，這裡也是看日出的絕佳地點。
                            </div>
                        </div>

                        <div onclick="openMap('仙巖園')" class="glass-panel p-3 rounded-xl active:scale-95 transition-transform cursor-pointer">
                            <div class="flex items-center mb-1">
                                <div class="w-8 h-8 rounded-full bg-pink-900/30 flex items-center justify-center mr-3 text-pink-400"><i class="fas fa-fan"></i></div>
                                <div class="font-bold text-sm">仙巖園</div>
                            </div>
                            <div class="spot-detail">
                                <div><span class="spot-tag"><i class="fas fa-utensils"></i> 美食：</span>必吃「兩棒餅」(Jambo Mochi)，有味噌和醬油兩種口味。</div>
                                <div class="mt-1"><span class="spot-tag"><i class="fas fa-info-circle"></i> 建議：</span>旁邊的星巴克是古蹟改建，非常漂亮，值得入內喝一杯。</div>
                            </div>
                        </div>

                        <div onclick="openMap('櫻島渡輪')" class="glass-panel p-3 rounded-xl active:scale-95 transition-transform cursor-pointer">
                            <div class="flex items-center mb-1">
                                <div class="w-8 h-8 rounded-full bg-blue-900/30 flex items-center justify-center mr-3 text-blue-400"><i class="fas fa-ship"></i></div>
                                <div class="font-bold text-sm">櫻島渡輪</div>
                            </div>
                            <div class="spot-detail">
                                <div><span class="spot-tag"><i class="fas fa-utensils"></i> 美食：</span>船內的「藪金烏龍麵」，出汁鮮甜，航程僅15分鐘，上船要趕快吃！</div>
                                <div class="mt-1"><span class="spot-tag"><i class="fas fa-wind"></i> 天氣：</span>海風大且可能會有火山灰，建議戴口罩和帽子保護。</div>
                            </div>
                        </div>

                        <div onclick="openMap('霧島神宮')" class="glass-panel p-3 rounded-xl active:scale-95 transition-transform cursor-pointer">
                            <div class="flex items-center mb-1">
                                <div class="w-8 h-8 rounded-full bg-red-900/30 flex items-center justify-center mr-3 text-red-400"><i class="fas fa-torii-gate"></i></div>
                                <div class="font-bold text-sm">霧島神宮</div>
                            </div>
                            <div class="spot-detail">
                                <div><span class="spot-tag"><i class="fas fa-utensils"></i> 美食：</span>周邊有「黑豚料理」或霧島溫泉市場的「溫泉蛋」。</div>
                                <div class="mt-1"><span class="spot-tag"><i class="fas fa-info-circle"></i> 建議：</span>南九州最大的神宮，求姻緣與事業運。坂本龍馬蜜月之地。</div>
                            </div>
                        </div>
                    </div>
                     <div onclick="openMap('霧島国際ホテル')" class="mt-6 p-4 rounded-xl bg-gradient-to-r from-gray-800 to-gray-900 border border-gray-700 flex items-center justify-between cursor-pointer">
                        <div>
                            <div class="text-[10px] text-[#d4af37] font-bold uppercase tracking-wider mb-1">Accommodation</div>
                            <div class="font-bold text-sm">霧島国際ホテル</div>
                        </div>
                        <i class="fas fa-bed text-gray-500"></i>
                    </div>
                </div>

                <!-- Day 3 Content -->
                <div id="day3" class="day-section">
                    <span class="inline-block px-3 py-1 bg-gray-700 text-gray-300 text-xs font-bold rounded mb-2">Day 3 • 12/6 (六)</span>
                    <h2 class="text-3xl font-bold mb-4 text-white">宮崎・日南</h2>
                    
                    <div class="space-y-3">
                         <div onclick="openMap('關之尾瀑布')" class="glass-panel p-3 rounded-xl active:scale-95 transition-transform cursor-pointer">
                            <div class="flex items-center mb-1">
                                <div class="w-8 h-8 rounded-full bg-blue-900/30 flex items-center justify-center mr-3 text-blue-400"><i class="fas fa-water"></i></div>
                                <div class="font-bold text-sm">關之尾瀑布</div>
                            </div>
                            <div class="spot-detail">
                                <span class="spot-tag"><i class="fas fa-info-circle"></i> 建議：</span>重點看點是世界最大規模的「甌穴群」(Pot Holes)。步道濕滑請小心。
                            </div>
                        </div>

                        <div onclick="openMap('日南太陽花園')" class="glass-panel p-3 rounded-xl active:scale-95 transition-transform cursor-pointer">
                            <div class="flex items-center mb-1">
                                <div class="w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center mr-3 text-gray-300"><i class="fas fa-archway"></i></div>
                                <div class="font-bold text-sm">日南太陽花園 (摩艾)</div>
                            </div>
                            <div class="spot-detail">
                                <div><span class="spot-tag"><i class="fas fa-utensils"></i> 美食：</span>園區餐廳提供簡單洋食，可嘗試宮崎特產「南蠻雞」。</div>
                                <div class="mt-1"><span class="spot-tag"><i class="fas fa-info-circle"></i> 建議：</span>7尊摩艾像分別代表工作、健康、戀愛等運勢，記得去摸摸你需要的那一尊！</div>
                            </div>
                        </div>

                        <div onclick="openMap('鵜戶神宮')" class="glass-panel p-3 rounded-xl active:scale-95 transition-transform cursor-pointer">
                            <div class="flex items-center mb-1">
                                <div class="w-8 h-8 rounded-full bg-red-900/30 flex items-center justify-center mr-3 text-red-400"><i class="fas fa-rabbit"></i></div>
                                <div class="font-bold text-sm">鵜戶神宮</div>
                            </div>
                            <div class="spot-detail">
                                <div><span class="spot-tag"><i class="fas fa-utensils"></i> 美食：</span>參道商店有賣「泡芙」和特色「運玉饅頭」。</div>
                                <div class="mt-1"><span class="spot-tag"><i class="fas fa-info-circle"></i> 建議：</span>一定要買「運玉」(5顆)，男生用左手、女生用右手，投進龜岩背上的繩圈內許願。</div>
                            </div>
                        </div>
                    </div>
                    <div onclick="openMap('宮崎觀光飯店')" class="mt-6 p-4 rounded-xl bg-gradient-to-r from-gray-800 to-gray-900 border border-gray-700 flex items-center justify-between cursor-pointer">
                        <div>
                            <div class="text-[10px] text-[#d4af37] font-bold uppercase tracking-wider mb-1">Accommodation</div>
                            <div class="font-bold text-sm">宮崎觀光飯店</div>
                        </div>
                        <i class="fas fa-bed text-gray-500"></i>
                    </div>
                </div>

                <!-- Day 4 Content -->
                <div id="day4" class="day-section">
                    <span class="inline-block px-3 py-1 bg-gray-700 text-gray-300 text-xs font-bold rounded mb-2">Day 4 • 12/7 (日)</span>
                    <h2 class="text-3xl font-bold mb-4 text-white">神話・高千穗</h2>
                    <div class="space-y-3">
                        <div onclick="openMap('飫肥城跡')" class="glass-panel p-3 rounded-xl active:scale-95 transition-transform cursor-pointer">
                            <div class="flex items-center mb-1">
                                <div class="w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center mr-3 text-gray-300"><i class="fas fa-history"></i></div>
                                <div class="font-bold text-sm">飫肥城跡</div>
                            </div>
                            <div class="spot-detail">
                                <div><span class="spot-tag"><i class="fas fa-utensils"></i> 美食：</span>「飫肥天」(炸魚餅) 與口感像布丁的「厚燒玉子」。</div>
                                <div class="mt-1"><span class="spot-tag"><i class="fas fa-info-circle"></i> 建議：</span>購買「邊走邊吃地圖」，可兌換5種當地小吃與景點門票，非常划算。</div>
                            </div>
                        </div>

                        <div onclick="openMap('高千穗天照鐵道')" class="glass-panel p-3 rounded-xl active:scale-95 transition-transform cursor-pointer">
                            <div class="flex items-center mb-1">
                                <div class="w-8 h-8 rounded-full bg-yellow-900/30 flex items-center justify-center mr-3 text-yellow-400"><i class="fas fa-train"></i></div>
                                <div class="font-bold text-sm">高千穗天照鐵道</div>
                            </div>
                            <div class="spot-detail">
                                <span class="spot-tag"><i class="fas fa-wind"></i> 天氣/穿著：</span>小火車為開放式車廂，經過高鐵橋時風非常大且冷，務必戴帽子與穿防風外套。
                            </div>
                        </div>

                        <div onclick="openMap('高千穗峽')" class="glass-panel p-3 rounded-xl active:scale-95 transition-transform cursor-pointer">
                            <div class="flex items-center mb-1">
                                <div class="w-8 h-8 rounded-full bg-green-900/30 flex items-center justify-center mr-3 text-green-400"><i class="fas fa-water"></i></div>
                                <div class="font-bold text-sm">高千穗峽</div>
                            </div>
                            <div class="spot-detail">
                                <div><span class="spot-tag"><i class="fas fa-utensils"></i> 美食：</span>「千穗之家」流水麵，體驗竹管流水麵的樂趣。</div>
                                <div class="mt-1"><span class="spot-tag"><i class="fas fa-info-circle"></i> 建議：</span>划船非常熱門，建議一早就先去預約或線上預訂，等待時間可先去吃流水麵。</div>
                            </div>
                        </div>
                    </div>
                    <div onclick="openMap('ANA Crowne Plaza Kumamoto')" class="mt-6 p-4 rounded-xl bg-gradient-to-r from-gray-800 to-gray-900 border border-gray-700 flex items-center justify-between cursor-pointer">
                        <div>
                            <div class="text-[10px] text-[#d4af37] font-bold uppercase tracking-wider mb-1">Accommodation</div>
                            <div class="font-bold text-sm">ANA Crowne Plaza Kumamoto</div>
                        </div>
                        <i class="fas fa-bed text-gray-500"></i>
                    </div>
                </div>

                <!-- Day 5 Content -->
                <div id="day5" class="day-section">
                    <span class="inline-block px-3 py-1 bg-gray-700 text-gray-300 text-xs font-bold rounded mb-2">Day 5 • 12/8 (一)</span>
                    <h2 class="text-3xl font-bold mb-4 text-white">熊本・返程</h2>
                    <div class="space-y-3">
                         <div onclick="openMap('熊本城')" class="glass-panel p-3 rounded-xl active:scale-95 transition-transform cursor-pointer">
                            <div class="flex items-center mb-1">
                                <div class="w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center mr-3 text-white"><i class="fas fa-chess-rook"></i></div>
                                <div class="font-bold text-sm">熊本城</div>
                            </div>
                            <div class="spot-detail">
                                <div><span class="spot-tag"><i class="fas fa-utensils"></i> 美食：</span>旁邊的「櫻之馬場 城彩苑」必吃：海膽可樂餅、辛子蓮藕、いきなり団子。</div>
                                <div class="mt-1"><span class="spot-tag"><i class="fas fa-info-circle"></i> 建議：</span>天守閣已修復可入內參觀，頂樓景色優美，可眺望整個熊本市。</div>
                            </div>
                        </div>

                        <div onclick="openMap('SAKURA MACHI Kumamoto')" class="glass-panel p-3 rounded-xl active:scale-95 transition-transform cursor-pointer">
                            <div class="flex items-center mb-1">
                                <div class="w-8 h-8 rounded-full bg-pink-900/30 flex items-center justify-center mr-3 text-pink-400"><i class="fas fa-shopping-bag"></i></div>
                                <div class="font-bold text-sm">櫻町購物中心</div>
                            </div>
                            <div class="spot-detail">
                                <span class="spot-tag"><i class="fas fa-info-circle"></i> 建議：</span>頂樓花園有超巨大熊本熊雕像，是打卡熱點。B1超市可買最後伴手禮。
                            </div>
                        </div>

                        <div onclick="openMap('熊本機場')" class="glass-panel p-3 rounded-xl active:scale-95 transition-transform cursor-pointer">
                            <div class="flex items-center mb-1">
                                <div class="w-8 h-8 rounded-full bg-blue-900/30 flex items-center justify-center mr-3 text-blue-400"><i class="fas fa-plane-departure"></i></div>
                                <div class="font-bold text-sm">熊本空港 -> 桃園</div>
                            </div>
                             <div class="spot-detail">
                                <span class="spot-tag"><i class="fas fa-info-circle"></i> 建議：</span>新航廈有很多美食與土產店，建議預留時間逛逛。
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- 2. 記帳與工具頁面 (隱藏/顯示) -->
        <div id="tools-view" class="section-view hidden w-full h-full p-5 overflow-y-auto pb-24">
            <h2 class="text-2xl font-bold mb-6 text-white">旅行助手</h2>
            
            <!-- 支出總覽卡片 -->
            <div class="bg-gradient-to-br from-gray-800 to-gray-900 p-6 rounded-2xl shadow-lg border border-gray-700 mb-6 relative overflow-hidden">
                <div class="absolute -right-4 -top-4 w-24 h-24 bg-[#d4af37] opacity-10 rounded-full blur-2xl"></div>
                <div class="text-gray-400 text-xs mb-1">目前總支出 (TWD)</div>
                <div class="text-3xl font-bold text-white mb-2" id="totalTWD">NT$ 0</div>
                <div class="text-xs text-gray-500">約合日幣: ¥<span id="totalJPY">0</span></div>
            </div>

            <!-- 匯率計算 -->
            <div class="mb-8">
                <h3 class="text-sm font-bold text-gray-400 mb-3 uppercase tracking-wider">匯率換算</h3>
                <div class="glass-panel p-4 rounded-xl space-y-3">
                    <div class="flex items-center justify-between text-sm">
                        <span class="text-gray-400">目前匯率</span>
                        <input type="number" id="rate" value="0.215" step="0.001" class="bg-transparent text-right text-white font-mono outline-none w-20 border-b border-gray-700 focus:border-[#d4af37]" oninput="convertCurrency()">
                    </div>
                    <div class="flex items-center gap-3">
                        <div class="flex-1 bg-gray-800 rounded-lg p-2 flex items-center">
                            <span class="text-xs text-gray-500 mr-2">¥</span>
                            <input type="number" id="calcJpy" placeholder="日幣" class="w-full bg-transparent outline-none text-white" oninput="convertCurrency()">
                        </div>
                        <i class="fas fa-arrow-right text-gray-600 text-xs"></i>
                        <div class="flex-1 bg-gray-800/50 rounded-lg p-2 flex items-center">
                            <span class="text-xs text-gray-500 mr-2">$</span>
                            <span id="calcTwd" class="text-[#d4af37] font-bold">0</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 記帳輸入 -->
            <div class="mb-8">
                <h3 class="text-sm font-bold text-gray-400 mb-3 uppercase tracking-wider">新增消費</h3>
                <div class="flex gap-2 mb-3">
                    <input type="text" id="descInput" placeholder="項目 (如: 拉麵)" class="flex-[2] bg-gray-800 border border-gray-700 rounded-lg p-3 text-sm text-white outline-none focus:border-[#d4af37]">
                    <input type="number" id="amtInput" placeholder="¥ 金額" class="flex-1 bg-gray-800 border border-gray-700 rounded-lg p-3 text-sm text-white outline-none focus:border-[#d4af37]">
                </div>
                <button onclick="addExpense()" class="w-full bg-[#d4af37] hover:bg-[#b5952f] text-black font-bold py-3 rounded-lg transition-colors active:scale-95 transform">
                    <i class="fas fa-plus mr-1"></i> 記一筆
                </button>
            </div>

            <!-- 支出列表 -->
            <div>
                <div class="flex justify-between items-end mb-3">
                    <h3 class="text-sm font-bold text-gray-400 uppercase tracking-wider">消費明細</h3>
                    <button onclick="clearExpenses()" class="text-xs text-red-500 hover:text-red-400">清除全部</button>
                </div>
                <div id="expenseList" class="space-y-2">
                    <!-- JS 生成內容 -->
                </div>
            </div>

            <!-- 天氣連結 -->
            <div class="mt-8 pt-8 border-t border-gray-800">
                <h3 class="text-sm font-bold text-gray-400 mb-3 uppercase tracking-wider">天氣預報</h3>
                <div class="grid grid-cols-3 gap-2">
                    <a href="https://tenki.jp/forecast/9/46/8810/" target="_blank" class="bg-blue-900/20 border border-blue-900/50 text-blue-400 text-center py-3 rounded-lg text-xs hover:bg-blue-900/30">鹿兒島</a>
                    <a href="https://tenki.jp/forecast/9/45/8710/" target="_blank" class="bg-blue-900/20 border border-blue-900/50 text-blue-400 text-center py-3 rounded-lg text-xs hover:bg-blue-900/30">宮崎</a>
                    <a href="https://tenki.jp/forecast/9/43/8610/" target="_blank" class="bg-blue-900/20 border border-blue-900/50 text-blue-400 text-center py-3 rounded-lg text-xs hover:bg-blue-900/30">熊本</a>
                </div>
            </div>
        </div>

    </main>

    <!-- 底部導航欄 -->
    <nav class="h-20 bg-[#121212] border-t border-gray-800 flex justify-around items-center px-2 pb-4 z-50 absolute bottom-0 w-full">
        <button onclick="switchMainTab('itinerary', this)" class="tab-btn active flex-1 flex flex-col items-center justify-center text-gray-500 py-2">
            <i class="fas fa-calendar-alt text-xl mb-1"></i>
            <span class="text-[10px]">行程</span>
        </button>
        <button onclick="switchMainTab('tools', this)" class="tab-btn flex-1 flex flex-col items-center justify-center text-gray-500 py-2">
            <i class="fas fa-wallet text-xl mb-1"></i>
            <span class="text-[10px]">錢包與工具</span>
        </button>
    </nav>

<script>
    // --- 1. 導航邏輯 ---
    function switchMainTab(tabName, btn) {
        // 切換內容區
        document.querySelectorAll('.section-view').forEach(el => el.classList.add('hidden'));
        document.getElementById(tabName + '-view').classList.remove('hidden');
        
        // 切換底部按鈕狀態
        document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
        btn.classList.add('active');
    }

    // 左側 Timeline 點擊滾動
    function scrollToDay(dayId) {
        const element = document.getElementById(dayId);
        const container = document.getElementById('content-scroll');
        if (element && container) {
            container.scrollTo({
                top: element.offsetTop - 20, // 稍微留點上邊距
                behavior: 'smooth'
            });
        }
    }

    // 監聽滾動以更新左側激活狀態
    document.getElementById('content-scroll').addEventListener('scroll', function() {
        const container = this;
        const days = ['day1', 'day2', 'day3', 'day4', 'day5'];
        let currentDay = '';

        days.forEach(dayId => {
            const el = document.getElementById(dayId);
            if (el.offsetTop <= container.scrollTop + 150) {
                currentDay = dayId;
            }
        });

        if (currentDay) {
            document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
            // 找到對應的 nav-item 並加上 active
            const index = days.indexOf(currentDay);
            if (index !== -1) {
                document.querySelectorAll('.nav-item')[index].classList.add('active');
            }
        }
    });

    // --- 2. 外部連結邏輯 ---
    function openMap(locationName) {
        const query = encodeURIComponent(locationName);
        window.open(`https://www.google.com/maps/search/?api=1&query=${query}`, '_blank');
    }

    // --- 3. 記帳與匯率邏輯 (保留原功能) ---
    let expenses = JSON.parse(localStorage.getItem('tripExpenses')) || [];
    let currentRate = 0.215;

    function renderExpenses() {
        const list = document.getElementById('expenseList');
        const totalTwdEl = document.getElementById('totalTWD');
        const totalJpyEl = document.getElementById('totalJPY');
        
        list.innerHTML = '';
        let totalJpy = 0;

        expenses.slice().reverse().forEach((item, index) => {
            totalJpy += parseFloat(item.amount);
            const twdVal = Math.round(item.amount * currentRate);
            
            const div = document.createElement('div');
            div.className = 'glass-panel p-3 rounded-lg flex justify-between items-center';
            div.innerHTML = `
                <div>
                    <div class="font-bold text-sm text-white">${item.desc}</div>
                    <div class="text-xs text-gray-500">NT$ ${twdVal}</div>
                </div>
                <div class="flex items-center">
                    <span class="font-mono font-bold text-[#d4af37] mr-3">¥${item.amount}</span>
                    <button class="text-gray-600 hover:text-red-500 transition-colors w-6 h-6 flex items-center justify-center rounded-full" onclick="deleteExpense(${expenses.length - 1 - index})">
                        <i class="fas fa-times text-xs"></i>
                    </button>
                </div>
            `;
            list.appendChild(div);
        });

        totalJpyEl.innerText = totalJpy;
        totalTwdEl.innerText = 'NT$ ' + Math.round(totalJpy * currentRate).toLocaleString();
    }

    function addExpense() {
        const desc = document.getElementById('descInput').value;
        const amt = document.getElementById('amtInput').value;
        
        if(desc && amt) {
            expenses.push({ desc: desc, amount: parseFloat(amt) });
            localStorage.setItem('tripExpenses', JSON.stringify(expenses));
            document.getElementById('descInput').value = '';
            document.getElementById('amtInput').value = '';
            renderExpenses();
        } else {
            alert('請輸入項目和金額');
        }
    }

    function deleteExpense(originalIndex) {
        if(confirm('確定刪除這筆紀錄嗎？')) {
            expenses.splice(originalIndex, 1);
            localStorage.setItem('tripExpenses', JSON.stringify(expenses));
            renderExpenses();
        }
    }

    function clearExpenses() {
        if(confirm('確定清空所有記帳資料？')) {
            expenses = [];
            localStorage.setItem('tripExpenses', JSON.stringify(expenses));
            renderExpenses();
        }
    }

    function convertCurrency() {
        const rate = parseFloat(document.getElementById('rate').value);
        const jpy = parseFloat(document.getElementById('calcJpy').value);
        currentRate = rate;
        
        if(!isNaN(jpy)) {
            document.getElementById('calcTwd').innerText = Math.round(jpy * rate);
        } else {
            document.getElementById('calcTwd').innerText = '0';
        }
        renderExpenses(); 
    }

    // 初始化
    renderExpenses();

</script>
</body>
</html>